"use client";

import { AutoSaveInput } from "@components/ui/Theme/AutoSaveInput";
import ThemeSelect from "@components/ui/Theme/ThemeSelect";
import { useAtomValue } from "jotai";
import { type NextPage } from "next";
import Head from "next/head";
import Chat from "../components/Chat/Chat";
import { chatUserIdAtom } from "./_app";

const Home: NextPage = () => {
  console.log("Loggin home page");
  const userId = useAtomValue(chatUserIdAtom);

  const handleSubmit = async (value: string) => {
    console.log("updating prompt id", value);
    if (!value?.length) {
      return;
    }

    // send reset to server
    await fetch("/api/chat", {
      method: "POST",
      body: JSON.stringify({
        Body: {
          userId: userId,
          messageText: `reset ${value}`,
        },
      }),
    });
  };

  return (
    <>
      <Head>
        <title>Create T3 App</title>
        <meta name="description" content="Generated by create-t3-app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <nav>
        <Link href="/faq">
            <a>FAQ</a>
        </Link>
      </nav>

      <main className="h-full p-4">
        <div className="text-2xl font-semibold">Test your Empathy!</div>
        <Chat />
      </main>
    </>
  );
};

export default Home;
